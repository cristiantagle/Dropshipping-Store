'use client';
import Link from "next/link";

type Category = {
  id: string;
  slug: string;
  nombre: string;
  description?: string | null;
  icon?: string | null;
  url?: string | null;
};

type Props = { categories: Category[] };

function pickUrl(c: Category): string {
  return c.url || "/lunaria-icon.png";
}

export default function CategoryGrid({ categories }: Props) {
  if (!categories || categories.length === 0) {
    return <p className="text-gray-600">No hay categor√≠as disponibles.</p>;
  }

  return (
    <ul className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {categories.map((c) => {
        const src = pickUrl(c);
        return (
          <li
            key={c.slug}
            className="group relative overflow-hidden rounded-2xl border bg-white hover:shadow-md transition"
          >
            <Link href={`/categorias/${c.slug}`} className="block">
              <div className="relative aspect-[4/3] bg-neutral-100">
                <img
                  src={src}
                  alt={c.nombre}
                  className="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
                  loading="lazy"
                  decoding="async"
                  referrerPolicy="no-referrer"
                />
              </div>
              <h3 className="mt-3 text-lg font-semibold">{c.nombre}</h3>
              {c.description && (
                <p className="text-sm text-gray-600">{c.description}</p>
              )}
            </Link>
          </li>
        );
      })}
    </ul>
  );
}
